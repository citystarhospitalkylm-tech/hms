{% extends "base.html" %}
{% block title %}{{ object|default_if_none:"Book" }} Appointment{% endblock %}
{% block content %}
  <h2>{{ object|default_if_none:"Book" }} Appointment</h2>
  <form method="post">{% csrf_token %}
    <label>Patient:<br>
      <select name="patient">
        {% for p in patients %}
          <option value="{{ p.id }}" {% if p.id|stringformat:"s" == form.patient.value|stringformat:"s" %}selected{% endif %}>
            {{ p.full_name }}
          </option>
        {% endfor %}
      </select>
    </label><br>
    <label>Doctor:<br>
      <select name="doctor">
        {% for d in doctors %}
          <option value="{{ d.id }}" {% if d.id|stringformat:"s" == form.doctor.value|stringformat:"s" %}selected{% endif %}>
            {{ d.get_full_name }}
          </option>
        {% endfor %}
      </select>
    </label><br>
    <label>Time:<br><input type="datetime-local" name="appointment_time" value="{{ form.appointment_time.value }}"></label><br>
    <button type="submit">Save</button>
  </form>
{% endblock %}